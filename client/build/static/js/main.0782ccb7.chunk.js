(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{170:function(e,t,n){},171:function(e,t,n){},252:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(28),s=n.n(c),i=(n(170),n(24)),o=n.n(i),l=n(33),j=n(41),b=(n(171),n(73)),u=n(48),d=n(27),h=n(37),p=n(162),O=n(6),x=function(e){var t=e.component,n=e.isSignedIn,r=Object(p.a)(e,["component","isSignedIn"]);return Object(O.jsx)(d.b,Object(h.a)(Object(h.a)({},r),{},{render:function(e){return n?Object(O.jsx)(t,Object(h.a)({},e)):Object(O.jsx)(d.a,{to:"/"})}}))},m=n(254),f=n(260),v=n(255),g=n(258),k=n(259),y=n(34);function C(){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(o.a.mark((function e(){var t,n,r,a,c,s,i,l,j,b,u,d=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:"",n=d.length>1&&void 0!==d[1]?d[1]:"GET",r=d.length>2?d[2]:void 0,a=d.length>3?d[3]:void 0,c="http://localhost:5000".concat(t),console.log("production"),c="http://172.24.98.84".concat(t),e.prev=7,s="JWT ".concat(a),i=c,(l=new Headers).append("Content-Type","application/json"),"GET"!==n){e.next=26;break}if(!a){e.next=21;break}return(b=new Headers).append("Authorization",s),e.next=18,fetch(i,{headers:b});case 18:j=e.sent,e.next=24;break;case 21:return e.next=23,fetch(i);case 23:j=e.sent;case 24:e.next=44;break;case 26:if("POST"!==n&&"PUT"!==n){e.next=33;break}return a&&l.append("Authorization",s),e.next=30,fetch(i,{method:n,body:JSON.stringify(r),headers:l});case 30:j=e.sent,e.next=44;break;case 33:if("DELETE"!==n){e.next=44;break}if(!a){e.next=41;break}return l.append("Authorization",s),e.next=38,fetch(i,{method:n,headers:l});case 38:j=e.sent,e.next=44;break;case 41:return e.next=43,fetch(i,{method:n});case 43:j=e.sent;case 44:if(j.ok){e.next=46;break}throw new Error("Request not fulfilled");case 46:return e.next=48,j.json();case 48:return u=e.sent,e.abrupt("return",u);case 52:return e.prev=52,e.t0=e.catch(7),console.error("error",e.t0),e.abrupt("return",{error:e.t0});case 56:case"end":return e.stop()}}),e,null,[[7,52]])})))).apply(this,arguments)}var w={labelCol:{span:8},wrapperCol:{span:16}},I={wrapperCol:{offset:8,span:16}},S=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({}),s=Object(j.a)(c,2),i=s[0],b=s[1],u=Object(r.useContext)(L),d=(u.admin,u.setAdmin),p=u.setToken,x=u.token,T=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C("/auth","POST",t);case 3:if("Invalid credentials"!==(n=e.sent).description&&!n.error){e.next=7;break}return b(t),e.abrupt("return",S());case 7:if(!n.access_token){e.next=11;break}return p(n.access_token),d(t),e.abrupt("return");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("error",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){a(!0)},E=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!1),e.next=3,C("/users","POST",i,x);case 3:(t=e.sent)&&!t.error&&T(i);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)(m.a,{className:"mt-4",children:[Object(O.jsx)(f.a,{title:"Crear Cuenta",visible:n,onOk:E,onCancel:function(){a(!1)},children:Object(O.jsx)("p",{children:"Email No Existe Desea Crear Una Nueva Cuenta"})}),Object(O.jsx)(v.a,{span:12,offset:6,children:Object(O.jsxs)(g.a,Object(h.a)(Object(h.a)({},w),{},{name:"basic",onFinish:T,onFinishFailed:function(e){console.error("Failed:",e)},children:[Object(O.jsx)(g.a.Item,{label:"Usuario",name:"username",rules:[{required:!0,message:"Campo obligatorio!"}],children:Object(O.jsx)(k.a,{})}),Object(O.jsx)(g.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Campo obligatorio!"}],children:Object(O.jsx)(k.a.Password,{})}),Object(O.jsx)(g.a.Item,Object(h.a)(Object(h.a)({},I),{},{children:Object(O.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))})]})},E=n(256),U=n(58),q=n(116),F=n(257),N=n(151),P=F.a.RangePicker,_={labelCol:{span:8},wrapperCol:{span:16}},D={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},$=function(e){var t=e.setContests,n=Object(r.useContext)(L).token,a=function(){var e=Object(l.a)(o.a.mark((function e(r){var a,c,s,i,l,j,b,u,d,h,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.startEndDate[0]._d,c=r.startEndDate[1]._d,s="".concat(a.getUTCDate()<=9?"0".concat(a.getUTCDate()):a.getUTCDate(),"-").concat(a.getUTCMonth()+1<=9?"0".concat(a.getUTCMonth()+1):"".concat(a.getUTCMonth()+1),"-").concat(a.getUTCFullYear()),i="".concat(c.getUTCDate()<=9?"0".concat(c.getUTCDate()):c.getUTCDate(),"-").concat(c.getUTCMonth()+1<=9?"0".concat(a.getUTCMonth()+1):"".concat(a.getUTCMonth()+1),"-").concat(c.getUTCFullYear()),l=r.name,j=r.script,b=r.bannerPath,u=r.recommendations,d=r.payment,h={name:l,script:j,banner_path:b,start_date:s,finish_date:i,recommendations:u,payment:d,url:Object(N.v4)()},e.next=8,C("/contests","POST",h,n);case 8:p=e.sent,t((function(e){return[p].concat(Object(q.a)(e))}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(g.a,Object(h.a)(Object(h.a)({},_),{},{name:"nest-messages",onFinish:function(e){return a(e)},validateMessages:D,children:[Object(O.jsx)(g.a.Item,{name:"name",label:"Nombre",rules:[{required:!0}],children:Object(O.jsx)(k.a,{})}),Object(O.jsx)(g.a.Item,{name:"bannerPath",label:"Banner",rules:[{required:!0}],children:Object(O.jsx)(k.a,{})}),Object(O.jsx)(g.a.Item,{name:"payment",label:"Pago",rules:[{required:!0}],children:Object(O.jsx)(k.a,{})}),Object(O.jsx)(g.a.Item,{name:"startEndDate",label:"Fecha",rules:[{required:!0}],children:Object(O.jsx)(P,{})}),Object(O.jsx)(g.a.Item,{name:"script",label:"Gui\xf3n",rules:[{required:!0}],children:Object(O.jsx)(k.a.TextArea,{})}),Object(O.jsx)(g.a.Item,{name:"recommendations",label:"Recomendaciones",rules:[{required:!0}],children:Object(O.jsx)(k.a.TextArea,{})}),Object(O.jsx)(g.a.Item,{wrapperCol:Object(h.a)(Object(h.a)({},_.wrapperCol),{},{offset:8}),children:Object(O.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))},A=[{title:"URL",dataIndex:"url",key:"url",render:function(e,t){return Object(O.jsx)(u.b,{to:"/".concat(t.url,"/home"),children:e})}},{title:"Nombre",dataIndex:"name",key:"name"},{title:"Fecha Inicio",dataIndex:"start_date",key:"start_date"},{title:"Pago",dataIndex:"payment",key:"payment"}],M=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),s=Object(j.a)(c,2),i=s[0],b=s[1],u=Object(r.useContext)(L).token;return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("/contests","GET",null,u);case 2:(t=e.sent).error||a(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}try{b(!0),function(){e.apply(this,arguments)}()}catch(t){console.error("error",t)}finally{b(!1)}}),[u,a]),i?Object(O.jsx)(m.a,{className:"mt-4",children:Object(O.jsx)(v.a,{children:Object(O.jsx)(U.a,{style:{fontSize:24},spin:!0})})}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m.a,{className:"mt-4",children:Object(O.jsx)(v.a,{children:Object(O.jsx)($,{setContests:a})})}),Object(O.jsx)(m.a,{children:Object(O.jsx)(v.a,{span:24,children:Object(O.jsx)(E.a,{dataSource:n,columns:A})})})]})},z=function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:'Click para redireccionar a "/" que es una ruta conocida:'}),Object(O.jsx)(u.b,{to:"/",children:"Click!!"})]})},G=n(261),R={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},J=function(){var e=Object(r.useState)(),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)([]),i=Object(j.a)(s,2),b=i[0],h=i[1],p=Object(r.useState)(!0),x=Object(j.a)(p,2),f=x[0],T=x[1],w=Object(d.h)().contestUrl,I=Object(r.useContext)(L).token,S=Object(d.g)();Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(!0),e.next=4,C("/contests/".concat(t),"GET",null,I);case 4:(n=e.sent).error||(c(n),console.log(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("error",e.t0);case 11:return e.prev=11,T(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(w)}),[w,c,I]),Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(!0),console.log(t),e.next=5,C("/contests/".concat(t,"/voices"),"GET",null,null);case 5:(n=e.sent).error||(console.log(n),h(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("error",e.t0);case 12:return e.prev=12,T(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))).apply(this,arguments)}n&&n.id&&function(t){e.apply(this,arguments)}(n.id)}),[n,T,h]);var E=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C("/contests/".concat(w),"DELETE",void 0,I);case 3:e.sent.error||S.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,console.log("/contests/".concat(n.id,"/voices")),e.next=5,C("/contests/".concat(n.id,"/voices"),"POST",t,I);case 5:(r=e.sent).error||h((function(e){return[r].concat(Object(q.a)(e))})),console.log(r,"POSTTTT"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("error",e.t0);case 13:return e.prev=13,e.finish(13);case 15:case"end":return e.stop()}}),e,null,[[1,10,13,15]])})));return function(t){return e.apply(this,arguments)}}();return f?Object(O.jsx)(m.a,{className:"mt-4",children:Object(O.jsx)(v.a,{children:Object(O.jsx)(U.a,{style:{fontSize:24},spin:!0})})}):n?Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsx)(m.a,{className:"mt-4",children:Object(O.jsxs)(v.a,{span:24,children:[I&&Object(O.jsx)(u.b,{to:"/",children:"Ir a Concursos"}),Object(O.jsxs)(G.b,{title:"Informaci\xf3n del Concurso",bordered:!0,children:[Object(O.jsx)(G.b.Item,{label:"Nombre",children:n.name}),Object(O.jsx)(G.b.Item,{label:"Pago",children:n.payment}),Object(O.jsx)(G.b.Item,{label:"Fecha Inicial",span:6,children:n.start_date}),Object(O.jsx)(G.b.Item,{label:"Fecha Final",span:6,children:n.finish_date}),Object(O.jsx)(G.b.Item,{label:"Gui\xf3n",span:6,children:n.script}),Object(O.jsx)(G.b.Item,{label:"Recomendaciones",span:6,children:n.recommendations})]})]})}),Object(O.jsxs)(m.a,{justify:"center",hidden:!I,children:[Object(O.jsx)(v.a,{className:"p-3",children:Object(O.jsx)(y.a,{type:"primary",onClick:function(){},children:"Editar"})}),Object(O.jsx)(v.a,{className:"p-3",children:Object(O.jsx)(y.a,{type:"primary",onClick:E,danger:!0,children:"Eliminar"})})]}),Object(O.jsxs)(m.a,{justify:"space-around",children:[Object(O.jsxs)(v.a,{children:[b&&0===b.length&&Object(O.jsx)("div",{children:"No hay voces!"}),b&&b.map((function(e){return Object(O.jsx)("div",{children:e.name},e.id)}))]}),Object(O.jsx)(v.a,{children:Object(O.jsxs)(g.a,{name:"nest-messages",onFinish:function(e){return F(e)},validateMessages:R,children:[Object(O.jsx)(g.a.Item,{name:"name",label:"Nombre",rules:[{required:!0}],children:Object(O.jsx)(k.a,{})}),Object(O.jsx)(g.a.Item,{name:"last_name",label:"Apellido",rules:[{required:!0}],children:Object(O.jsx)(k.a,{})}),Object(O.jsx)(g.a.Item,{name:"email",label:"Correo electr\xf3nico",rules:[{required:!0}],children:Object(O.jsx)(k.a,{})}),Object(O.jsx)(g.a.Item,{name:"original_voice_file_path",label:"Archivo de voz",children:Object(O.jsx)(k.a,{type:"file"})}),Object(O.jsx)(g.a.Item,{name:"observation_message",label:"Obervaciones",rules:[{required:!0}],children:Object(O.jsx)(k.a.TextArea,{})}),Object(O.jsx)(g.a.Item,{wrapperCol:{offset:8},children:Object(O.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})})]})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)("h3",{children:"Concurso no encontrado! Click para redireccionar"})})}),Object(O.jsx)(m.a,{children:Object(O.jsx)(v.a,{children:Object(O.jsx)("h3",{children:Object(O.jsx)(u.b,{to:"/",children:"Inicio"})})})})]})},L=Object(r.createContext)();var B=function(){var e=Object(r.useState)(),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(j.a)(c,2),i=s[0],h=s[1],p=Object(r.useMemo)((function(){return{admin:n,setAdmin:a,token:i,setToken:h}}),[a,n,i,h]),m=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(void 0),h(void 0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(u.a,{children:Object(O.jsxs)(L.Provider,{value:p,children:[Object(O.jsx)(b.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],children:Object(O.jsx)(b.a.Item,{children:i?Object(O.jsx)(u.b,{to:"/",onClick:m,children:"Cerrar Sesion"}):Object(O.jsx)(u.b,{to:"/",children:"Login"})},"1")}),Object(O.jsxs)(d.d,{children:[Object(O.jsx)(d.b,{path:"/",exact:!0,component:function(){return n?Object(O.jsx)(x,{path:"/",exact:!0,isSignedIn:!!n,component:function(){return Object(O.jsx)(M,{})}}):Object(O.jsx)(S,{})}}),Object(O.jsx)(d.b,{path:"/:contestUrl/home",exact:!0,component:function(){return Object(O.jsx)(J,{})}}),Object(O.jsx)(d.b,{path:"*",component:z})]})]})})})};n(250),n(251);s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(B,{})}),document.getElementById("root"))}},[[252,1,2]]]);
//# sourceMappingURL=main.0782ccb7.chunk.js.map